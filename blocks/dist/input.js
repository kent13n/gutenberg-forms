(()=>{"use strict";function e(l){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(l)}function l(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,a=new Array(l);t<l;t++)a[t]=e[t];return a}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var a,n,r,m,o=[],u=!0,c=!1;try{if(r=(t=t.call(e)).next,0===l){if(Object(t)!==t)return;u=!1}else for(;!(u=(a=r.call(t)).done)&&(o.push(a.value),o.length!==l);u=!0);}catch(e){c=!0,n=e}finally{try{if(!u&&null!=t.return&&(m=t.return(),Object(m)!==m))return}finally{if(c)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=wp.blocks.registerBlockType,n=wp.blockEditor,r=n.RichText,m=n.InspectorControls,o=n.MediaUpload,u=n.MediaUploadCheck,c=(n.InnerBlocks,wp.components),i=(c.ColorPicker,c.PanelBody),p=c.TextControl,s=c.Button,b=c.__experimentalNumberControl,d=c.SelectControl,f=c.ToggleControl,g=c.FormTokenField,w=wp.i18n.__,h=(wp.data.useSelect,wp.element.useState);function v(e){var l={};return NaN!==parseInt(e.order)&&parseInt(e.order)>0&&(l.order=e.order.toString()),l}function E(e){switch(e.type){case"email":case"password":case"text":return wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("div",{className:"input-group"},wp.element.createElement("div",{className:"input-group-field"},wp.element.createElement("input",{id:e.name,type:e.type,name:e.name,placeholder:e.addPlaceholder?e.placeholder:"",value:e.defaultValue,onChange:function(){}}))),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")));case"number":var l={id:e.name,type:e.type,name:e.name,placeholder:e.addPlaceholder?e.placeholder:"",value:e.defaultValue,onChange:function(){}};return null!==e.minValue&&(l.min=e.minValue),null!==e.maxValue&&(l.max=e.maxValue),wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("div",{className:"input-group"},wp.element.createElement("div",{className:"input-group-field"},wp.element.createElement("input",l)),wp.element.createElement("div",{className:"input-suffix"},wp.element.createElement("button",{className:"input-button-plus",type:"button"},"+"),wp.element.createElement("button",{className:"input-button-minus",type:"button"},"-"))),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")));case"file":return wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("label",{className:"file-label"},wp.element.createElement("input",{id:e.name,type:e.type,name:e.name}),wp.element.createElement("span",{className:"file-custom","data-text":e.addPlaceholder?e.placeholder:"","data-browse":"Choisir"})),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")));case"textarea":return wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("div",{className:"input-group textarea"},wp.element.createElement("div",{className:"input-group-field"},wp.element.createElement("textarea",{id:e.name,name:e.name,placeholder:e.addPlaceholder?e.placeholder:"",value:e.defaultValue,onChange:function(){}})))))}return""}function y(e){return e.addLabelImage&&""!==e.labelImage?wp.element.createElement(React.Fragment,null,wp.element.createElement("div",{className:"label-image-group"},wp.element.createElement("img",{src:e.labelImage,alt:e.label}),""!==e.label&&wp.element.createElement("label",{htmlFor:e.name,dangerouslySetInnerHTML:{__html:e.label}}))):""!==e.label?wp.element.createElement(React.Fragment,null,""!==e.label&&wp.element.createElement("label",{htmlFor:e.name},e.label)):void 0}a("gutenberg-forms/input",{title:w("Input","gutenberg-forms"),icon:"layout",category:"gutenberg-forms",edit:function(l){var a=l.className,n=l.attributes,c=l.setAttributes,w=n.toConfirm,y=n.addPlaceholder,N=n.addLabelImage,I=n.labelInline,x=n.darkLabel;"string"!=typeof a&&(a=""),n.labelInline&&(a+=" label-inline"),n.darkLabel&&(a+=" label-dark"),n.addLabelImage&&""!==n.labelImage&&(a+=" label-image"),n.size&&"normal"!==n.size&&(a+=" "+n.size);var k=C.map((function(e){return e.label})),S=t(h(n.rules.map((function(e){return e.label}))),2),L=S[0],V=S[1],F=v(n);return wp.element.createElement("div",{className:a,style:F},""!==n.type&&E(n),wp.element.createElement(m,null,wp.element.createElement(i,{title:"Settings",initialOpen:!1},wp.element.createElement(f,{label:"Dark label",checked:x,onChange:function(){return c({darkLabel:!x})}}),wp.element.createElement(f,{label:"Label inline",checked:I,onChange:function(){return c({labelInline:!I})}}),wp.element.createElement(f,{label:"Activer Confirmation",checked:w,onChange:function(){return c({toConfirm:!w})}}),wp.element.createElement(f,{label:"Ajouter un placeholder",checked:y,onChange:function(){return c({addPlaceholder:!y})}}),wp.element.createElement(f,{label:"Ajouter un label image",checked:N,onChange:function(){return c({addLabelImage:!N})}}),y&&wp.element.createElement(p,{label:"Placeholder:",value:n.placeholder,onChange:function(e){c({placeholder:e})}}),N&&function(e,l){var t=e.addLabelImage;return wp.element.createElement(u,null,wp.element.createElement(o,{type:"image",onSelect:function(e){var t=e.sizes.full.url.replace("http://","//")||e.sizes.full.url;l({labelImage:t})},render:function(l){var a=l.open;return wp.element.createElement(React.Fragment,null,t&&wp.element.createElement("h3",{className:"label-image-title"},"Label image:"),wp.element.createElement(s,{onClick:a,className:e.labelImage?"label-image-button":"label-image-button button"},e.labelImage?wp.element.createElement("img",{src:e.labelImage}):"Choisir une image"))}}))}(n,c),wp.element.createElement("h3",{className:"label-image-title"},"Label:"),wp.element.createElement(r,{className:"richtext-label",label:"Label:",value:n.label,onChange:function(e){c({label:e})}}),wp.element.createElement(p,{label:"Nom du champ:",value:n.name,onChange:function(e){c({name:e})}}),wp.element.createElement(d,{label:"Taille du champ:",value:n.size,onChange:function(e){c({size:e})},options:[{value:"small",label:"Small"},{value:"normal",label:"Normal"}]}),wp.element.createElement(d,{label:"Type du champ:",value:n.type,onChange:function(e){c({type:e})},options:[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"password",label:"Password"},{value:"file",label:"File"},{value:"textarea",label:"Textarea"}]}),wp.element.createElement(p,{label:"Valeur par défaut:",value:n.defaultValue,onChange:function(e){c({defaultValue:e})}}),"number"===n.type&&wp.element.createElement(React.Fragment,null,wp.element.createElement(b,{label:"Min value:",value:n.minValue,onChange:function(e){e=""===e?null:parseInt(e)||0,c({minValue:e})}}),wp.element.createElement(b,{label:"Max value:",value:n.maxValue,onChange:function(e){e=""===e?null:parseInt(e)||0,c({maxValue:e})}})),wp.element.createElement(b,{label:"Order:",value:n.order,onChange:function(e){e=""===e?null:parseInt(e)||0,c({order:e})}}),wp.element.createElement(g,{label:"Règles de validation:",value:L,suggestions:k,onChange:function(l){var a="object"===e(l)&&l.length>0?l[l.length-1]:l;if(k.includes(a)){V(l);var n=function(l){var a=[];if("object"===e(l)&&l.length>0)for(var n=function(){var e=t(m[r],2),l=(e[0],e[1]);o=C.find((function(e){return e.label===l})),o&&a.push(o)},r=0,m=Object.entries(l);r<m.length;r++){var o;n()}return a}(l);c({rules:n})}}}))))},save:function(e){var l=e.className,t=e.attributes;"string"!=typeof l&&(l=""),t.labelInline&&(l+=" label-inline"),t.darkLabel&&(l+=" label-dark"),t.addLabelImage&&""!==t.labelImage&&(l+=" label-image"),t.size&&"normal"!==t.size&&(l+=" "+t.size);var a=v(t);return wp.element.createElement("div",{className:l,style:a},""!==t.type&&E(t))}});var C=[{value:"required",label:"Requis"},{value:"email",label:"Email"},{value:"number",label:"Nombre"},{value:"alphanumeric",label:"Alphanumérique"}]})();
(()=>{"use strict";function e(l){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(l)}function l(e,l){(null==l||l>e.length)&&(l=e.length);for(var t=0,n=new Array(l);t<l;t++)n[t]=e[t];return n}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,l){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,a,r,m,o=[],u=!0,c=!1;try{if(r=(t=t.call(e)).next,0===l){if(Object(t)!==t)return;u=!1}else for(;!(u=(n=r.call(t)).done)&&(o.push(n.value),o.length!==l);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=t.return&&(m=t.return(),Object(m)!==m))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=wp.blocks.registerBlockType,a=wp.blockEditor,r=a.RichText,m=a.InspectorControls,o=a.MediaUpload,u=a.MediaUploadCheck,c=(a.InnerBlocks,wp.components),i=(c.ColorPicker,c.PanelBody),p=c.TextControl,s=c.Button,b=c.__experimentalNumberControl,f=c.SelectControl,d=c.ToggleControl,g=c.FormTokenField,w=wp.i18n.__,h=(wp.data.useSelect,wp.element.useState);function v(e){switch(e.type){case"email":case"password":case"text":return wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("div",{className:"input-group"},wp.element.createElement("div",{className:"input-group-field"},wp.element.createElement("input",{type:e.type,name:e.name,placeholder:e.addPlaceholder?e.placeholder:"",value:e.defaultValue,onChange:function(){}}))),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")));case"number":var l={type:e.type,name:e.name,placeholder:e.addPlaceholder?e.placeholder:"",value:e.defaultValue,onChange:function(){}};return null!==e.minValue&&(l.min=e.minValue),null!==e.maxValue&&(l.max=e.maxValue),wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("div",{className:"input-group"},wp.element.createElement("div",{className:"input-group-field"},wp.element.createElement("input",l)),wp.element.createElement("div",{className:"input-suffix"},wp.element.createElement("button",{className:"input-button-plus",type:"button"},"+"),wp.element.createElement("button",{className:"input-button-minus",type:"button"},"-"))),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")));case"file":return wp.element.createElement(React.Fragment,null,y(e),wp.element.createElement("div",{className:"flex-group"},wp.element.createElement("label",{className:"file-label"},wp.element.createElement("input",{type:e.type,name:e.name}),wp.element.createElement("span",{className:"file-custom","data-text":e.addPlaceholder?e.placeholder:"","data-browse":"Choisir"})),e.toConfirm&&wp.element.createElement("button",{className:"to-confirm",type:"button"},"OK")))}return""}function y(e){return e.addLabelImage&&""!==e.labelImage?wp.element.createElement(React.Fragment,null,wp.element.createElement("div",{className:"label-image-group"},wp.element.createElement("img",{src:e.labelImage}),""!==e.label&&wp.element.createElement("label",{htmlFor:e.name,dangerouslySetInnerHTML:{__html:e.label}}))):""!==e.label?wp.element.createElement(React.Fragment,null,""!==e.label&&wp.element.createElement("label",{htmlFor:e.name},e.label)):void 0}n("gutenberg-forms/input",{title:w("Input","gutenberg-forms"),icon:"layout",category:"gutenberg-forms",edit:function(l){var n=l.className,a=l.attributes,c=l.setAttributes,w=a.toConfirm,y=a.addPlaceholder,C=a.addLabelImage,N=a.labelInline;"string"!=typeof n&&(n=""),a.labelInline&&(n+=" label-inline"),a.addLabelImage&&""!==a.labelImage&&(n+=" label-image"),a.size&&"normal"!==a.size&&(n+=" "+a.size);var I=E.map((function(e){return e.label})),x=t(h(a.rules.map((function(e){return e.label}))),2),S=x[0],V=x[1];return wp.element.createElement("div",{className:n},""!==a.type&&v(a),wp.element.createElement(m,null,wp.element.createElement(i,{title:"Settings",initialOpen:!1},wp.element.createElement(d,{label:"Label inline",checked:N,onChange:function(){return c({labelInline:!N})}}),wp.element.createElement(d,{label:"Activer Confirmation",checked:w,onChange:function(){return c({toConfirm:!w})}}),wp.element.createElement(d,{label:"Ajouter un placeholder",checked:y,onChange:function(){return c({addPlaceholder:!y})}}),wp.element.createElement(d,{label:"Ajouter un label image",checked:C,onChange:function(){return c({addLabelImage:!C})}}),y&&wp.element.createElement(p,{label:"Placeholder:",value:a.placeholder,onChange:function(e){c({placeholder:e})}}),C&&function(e,l){var t=e.addLabelImage;return wp.element.createElement(u,null,wp.element.createElement(o,{type:"image",onSelect:function(e){var t=e.sizes.full.url.replace("http://","//")||e.sizes.full.url;l({labelImage:t})},render:function(l){var n=l.open;return wp.element.createElement(React.Fragment,null,t&&wp.element.createElement("h3",{className:"label-image-title"},"Label image:"),wp.element.createElement(s,{onClick:n,className:e.labelImage?"label-image-button":"label-image-button button"},e.labelImage?wp.element.createElement("img",{src:e.labelImage}):"Choisir une image"))}}))}(a,c),wp.element.createElement("h3",{className:"label-image-title"},"Label:"),wp.element.createElement(r,{className:"richtext-label",label:"Label:",value:a.label,onChange:function(e){c({label:e})}}),wp.element.createElement(p,{label:"Nom du champ:",value:a.name,onChange:function(e){c({name:e})}}),wp.element.createElement(f,{label:"Taille du champ:",value:a.size,onChange:function(e){c({size:e})},options:[{value:"small",label:"Small"},{value:"normal",label:"Normal"}]}),wp.element.createElement(f,{label:"Type du champ:",value:a.type,onChange:function(e){c({type:e})},options:[{value:"text",label:"Text"},{value:"number",label:"Number"},{value:"email",label:"Email"},{value:"password",label:"Password"},{value:"file",label:"File"}]}),wp.element.createElement(p,{label:"Valeur par défaut:",value:a.defaultValue,onChange:function(e){c({defaultValue:e})}}),"number"===a.type&&wp.element.createElement(React.Fragment,null,wp.element.createElement(b,{label:"Min value:",value:a.minValue,onChange:function(e){e=""===e?null:parseInt(e)||0,c({minValue:e})}}),wp.element.createElement(b,{label:"Max value:",value:a.maxValue,onChange:function(e){e=""===e?null:parseInt(e)||0,c({maxValue:e})}})),wp.element.createElement(g,{label:"Règles de validation:",value:S,suggestions:I,onChange:function(l){var n="object"===e(l)&&l.length>0?l[l.length-1]:l;if(I.includes(n)){V(l);var a=function(l){var n=[];if("object"===e(l)&&l.length>0)for(var a=function(){var e=t(m[r],2),l=(e[0],e[1]);o=E.find((function(e){return e.label===l})),o&&n.push(o)},r=0,m=Object.entries(l);r<m.length;r++){var o;a()}return n}(l);console.log(a),c({rules:a})}}}))))},save:function(e){var l=e.className,t=e.attributes;return"string"!=typeof l&&(l=""),t.labelInline&&(l+=" label-inline"),t.addLabelImage&&""!==t.labelImage&&(l+=" label-image"),t.size&&"normal"!==t.size&&(l+=" "+t.size),wp.element.createElement("div",{className:l},""!==t.type&&v(t))}});var E=[{value:"required",label:"Requis"},{value:"email",label:"Email"},{value:"number",label:"Nombre"},{value:"alphanumeric",label:"Alphanumérique"}]})();